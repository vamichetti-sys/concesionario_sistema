{% extends "base.html" %}
{% load static %}

{% block title %}Boleto {{ boleto.numero }}{% endblock %}

{% block content %}
<style>
/* ===============================
   CONFIGURACI√ìN A4 ‚Äì FORZADA
=============================== */
@page {
    size: A4;
    margin: 0;
}

/* RESET GENERAL */
html, body {
    margin: 0;
    padding: 0;
    background: #fff;
    font-family: "Times New Roman", serif;
    font-size: 10pt;
    line-height: 1.3;
    color: #000;
}

/* ===============================
   CONTENEDOR A4 REAL
=============================== */
.boleto-page {
    width: 210mm;
    height: 297mm;
    overflow: hidden;
    position: relative;
}

/* ===============================
   ESCALADO DEFINITIVO
   (GARANTIZA 1 SOLA HOJA)
=============================== */
.boleto-scale {
    transform: scale(0.94);
    transform-origin: top center;
    width: 100%;
}

/* ===============================
   EVITAR CORTES INTERNOS
=============================== */
* {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
}

/* ===============================
   ENCABEZADO
=============================== */
.header-top {
    text-align: center;
    margin: 8mm 0 6mm 0;
}

.header-top .empresa {
    font-size: 18pt;
    font-weight: bold;
}

.header-top .linea {
    border-bottom: 2px solid #000;
    width: 65%;
    margin: 3mm auto;
}

.header-top .sub {
    font-size: 11pt;
    font-weight: bold;
}

.header-top .direccion {
    font-size: 9.5pt;
}

/* ===============================
   T√çTULO
=============================== */
.header-title {
    text-align: center;
    margin-bottom: 6mm;
}

.header-title h3 {
    font-size: 12pt;
    font-weight: bold;
    border-bottom: 2px solid #000;
    display: inline-block;
    padding-bottom: 1mm;
}

/* ===============================
   DATOS VEH√çCULO
=============================== */
.boleto-datos {
    width: 72%;
    margin: 0 auto 6mm auto;
    font-size: 10pt;
    text-align: center;
}

/* ===============================
   TEXTO LEGAL
=============================== */
.boleto-body {
    width: 72%;
    margin: 0 auto;
    text-align: justify;
    white-space: pre-line;
    text-indent: 18px;
    hyphens: auto;
}

/* ===============================
   FIRMAS (SIEMPRE DENTRO DE A4)
=============================== */
.boleto-firmas {
    width: 100%;
    margin-top: 22mm;
    display: flex;
    justify-content: space-between;
    font-size: 9.5pt;
}

.firma-col {
    width: 40%;
    text-align: left;
}

.firma-linea {
    border-top: 1px solid #000;
    margin-bottom: 3mm;
}

/* ===============================
   BOTONES (NO IMPRIME)
=============================== */
.acciones {
    width: 210mm;
    margin: 25px auto;
    display: flex;
    justify-content: space-between;
}

/* ===============================
   IMPRESI√ìN
=============================== */
@media print {
    .sidebar,
    .topbar,
    .acciones,
    .pdf-link {
        display: none !important;
    }

    .content {
        margin: 0 !important;
        padding: 0 !important;
    }
}
</style>

<!-- ===============================
     HOJA A4
=============================== -->
<div class="boleto-page">
    <div class="boleto-scale">

        <!-- ENCABEZADO -->
        <div class="header-top">
            <div class="empresa">HUGO AMICHETTI AUTOMOTORES</div>
            <div class="linea"></div>
            <div class="sub">AUTOMOTORES NUEVOS Y USADOS</div>
            <div class="direccion">LARREA 255, ROJAS BS AS (2705)</div>
        </div>

        <!-- T√çTULO -->
        <div class="header-title">
            <h3>BOLETO DE COMPRA VENTA</h3>
        </div>

        <!-- DATOS VEH√çCULO -->
        <div class="boleto-datos">
            {% if boleto.vehiculo %}
                {{ boleto.vehiculo.marca }} {{ boleto.vehiculo.modelo }}
                {% if boleto.vehiculo.dominio %}
                    ‚Äì {{ boleto.vehiculo.dominio }}
                {% endif %}
            {% endif %}
        </div>

        <!-- TEXTO LEGAL -->
        <div class="boleto-body">
{{ texto_boleto }}
        </div>

        <!-- FIRMAS -->
        <div class="boleto-firmas">

            <div class="firma-col">
                <div class="firma-linea"></div>
                <strong>APELLIDO:</strong> {{ vendedor.apellido }}<br>
                <strong>NOMBRE:</strong> {{ vendedor.nombre }}<br>
                <strong>DIRECCI√ìN:</strong> {{ vendedor.direccion }}<br>
                <strong>DNI:</strong> {{ vendedor.dni }}
            </div>

            <div class="firma-col">
                <div class="firma-linea"></div>
                <strong>APELLIDO:</strong> {{ comprador.apellido }}<br>
                <strong>NOMBRE:</strong> {{ comprador.nombre }}<br>
                <strong>DIRECCI√ìN:</strong> {{ comprador.direccion }}<br>
                <strong>DNI:</strong> {{ comprador.dni }}
            </div>

        </div>

    </div>
</div>

<!-- ===============================
     ACCIONES (NO IMPRIME)
=============================== -->
<div class="acciones">

    <button onclick="window.print()" class="btn btn-dark">
        üñ®Ô∏è Imprimir en A4
    </button>

    {% if boleto.pdf %}
    <a href="{{ boleto.pdf.url }}"
       target="_blank"
       class="btn btn-primary pdf-link">
        üìÑ Ver / Descargar PDF
    </a>
    {% endif %}

    <a href="{% url 'boletos:lista' %}" class="btn btn-outline-secondary">
        Volver
    </a>
</div>

{% endblock %}
